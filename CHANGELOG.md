# Changelog

## 0.3.2

### Patch Changes

- <!-- markdownlint-disable MD041 --> ([#229](https://github.com/chizmw/botc-custom-script-json2pdf/pull/229))

  chore(deps): bump pypdf from 3.13.0 to 3.15.4

- <!-- markdownlint-disable MD041 --> ([#228](https://github.com/chizmw/botc-custom-script-json2pdf/pull/228))

  chore(deps): bump boto3 from 1.28.10 to 1.28.35

- chore: remote janky deopenabot action ([#225](https://github.com/chizmw/botc-custom-script-json2pdf/pull/225))

- fix: add missing changeset action template ([#226](https://github.com/chizmw/botc-custom-script-json2pdf/pull/226))

- <!-- markdownlint-disable MD041 --> ([#202](https://github.com/chizmw/botc-custom-script-json2pdf/pull/202))

  Bump discord-webhook from 1.2.0 to 1.3.0

- <!-- markdownlint-disable MD041 --> ([#213](https://github.com/chizmw/botc-custom-script-json2pdf/pull/213))

  Bump aws-actions/configure-aws-credentials from 2 to 3

- <!-- markdownlint-disable MD041 --> ([#214](https://github.com/chizmw/botc-custom-script-json2pdf/pull/214))

  Bump aws-lambda-powertools from 2.21.0 to 2.23.1

- <!-- markdownlint-disable MD041 --> ([#183](https://github.com/chizmw/botc-custom-script-json2pdf/pull/183))

  Bump pylint from 2.17.4 to 2.17.5

- fix: incorrect repo name in changeset template, and fragments ([#230](https://github.com/chizmw/botc-custom-script-json2pdf/pull/230))

## 0.3.1

### Patch Changes

- fix: errant space in repo check preventing changeset release ([#222](https://github.com/chizmw/botc-custom-script-json2pdf/pull/222))

- chore: add dependabot changeset action workflow ([#223](https://github.com/chizmw/botc-custom-script-json2pdf/pull/223))

- chore: trigger changesets (ref: changesets/bot#78) ([#221](https://github.com/chizmw/botc-custom-script-json2pdf/pull/221))

## 0.3.0

### Minor Changes

- replace changie with changesets ([#219](https://github.com/chizmw/botc-custom-script-json2pdf/pull/219))
  All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html),
and is generated by [Changie](https://github.com/miniscruff/changie).

## [v0.2.48](https://github.com/chizmw/botc-custom-script-json2pdf/releases/tag/0.2.48) (2023-08-26)

## [v0.2.47](https://github.com/chizmw/botc-custom-script-json2pdf/releases/tag/0.2.47) (2023-08-26)

### Fixed

- fix: add mising icons: bootlegger and plaguedoctor

## [v0.2.46](https://github.com/chizmw/botc-custom-script-json2pdf/releases/tag/0.2.46) (2023-08-26)

### Added

- feat: add bootlegger and plaguedoctor (upstream data update)

## [v0.2.45](https://github.com/chizmw/botc-custom-script-json2pdf/releases/tag/0.2.45) (2023-07-24)

### Dependencies

- Bump actions/setup-python from 3 to 4
  [#177]
  (https://github.com/chizmw/botc-custom-script-json2pdf/issues/177)

## [v0.2.44](https://github.com/chizmw/botc-custom-script-json2pdf/releases/tag/0.2.44) (2023-07-24)

### Dependencies

- run: poetry update
- run: pre-commit autoupdate

## [v0.2.43](https://github.com/chizmw/botc-custom-script-json2pdf/releases/tag/0.2.43) (2023-07-22)

### Added

- add workflow to run python tests
- use blocking concurrency with terraform-serverless-deploy workflow
- poetry add pytest

### Changed

- Replaced unittest with pytest
- update/refactor ScriptOptions
- replace (deprecated) pkg_resources with importlib.meta
- update ScriptOptions to use @property
- use latest upstream combined data
- feat: add updated upstream data (incl. harpy)
- update tests for external data

### Fixed

- use 'pytest' not 'py.test'
- remove duplicates 'concurrency' in terraform-serverless-deploy.yml

## [v0.2.42](https://github.com/chizmw/botc-custom-script-json2pdf/releases/tag/0.2.42) (2023-07-21)

## [v0.2.41](https://github.com/chizmw/botc-custom-script-json2pdf/releases/tag/0.2.41) (2023-07-21)

### Added

- fetch updated upstream data (incl. harpy)

## [v0.2.40](https://github.com/chizmw/botc-custom-script-json2pdf/releases/tag/0.2.40) (2023-07-18)

## [v0.2.39](https://github.com/chizmw/botc-custom-script-json2pdf/releases/tag/0.2.39) (2023-07-11)

### Dependencies

- run: poetry update

## [v0.2.38](https://github.com/chizmw/botc-custom-script-json2pdf/releases/tag/0.2.38) (2023-07-10)

### Dependencies

- Bump pypdf from 3.11.1 to 3.12.1
  [#155]
  (https://github.com/chizmw/botc-custom-script-json2pdf/issues/155)

## [v0.2.37](https://github.com/chizmw/botc-custom-script-json2pdf/releases/tag/0.2.37) (2023-07-03)

### Fixed

- fix versionFormat in .changie.yml (+retro fix 0.2.36)

## v0.2.36 (2023-06-30)

### Changed

- linkify issue/PR numbers in CHANGELOG [#145]
- linkify version (release) numbers in CHANGELOG
- only terraform/sls deploy for PR if certain files are changed

## 0.2.35 - 2023-06-30

### Dependencies

- Bump pypdf from 3.11.0 to 3.11.1 [#140]

## 0.2.34 - 2023-06-30

### Added

- add some workflow concurrency rules

## 0.2.33 - 2023-06-30

## 0.2.32 - 2023-06-30

## 0.2.31 - 2023-06-30

## 0.2.30 - 2023-06-30

### Added

- add github-actions and terraform to dependabot

## 0.2.29 - 2023-06-26

### Changed

- run: poetry update

## 0.2.28 - 2023-06-23

### Added

- add highpriestess

## 0.2.27 - 2023-06-06

### Changed

- update aws-lambda-powertools (2.16.2)

## 0.2.26 - 2023-06-06

### Changed

- update poetry/python deps
- auto-update precommit hook versions

## 0.2.25 - 2023-05-26

### Changed

- change 'make \*-variations' to open each pdf
- refactor player reference back

## 0.2.24 - 2023-05-26

### Added

- add (dev) dependency: types-requests

### Changed

- Update gameinfo/\*.json from assets
- run poetry update
- fix simple night sheet for 9 jinx insanity

### Removed

- remove duplicates css style

### Fixed

- fix Docker build after gameinfo/ -> data/ changes

## 0.2.23 - 2023-05-23

### Changed

- replace boolean easypdf option with 'pdf_format'
- use ensure_logger() in lambda.py

### Fixed

- add missing end_segment() for xray in lambda

## 0.2.22 - 2023-05-21

### Changed

- move Serverless workflow into terraform's
- rename terraform.yml -> terraform-serverless-deploy.yml
- use "max" lambda memorySize: 3008

## 0.2.21 - 2023-05-21

### Added

- add Knight and Steward [#106]

### Changed

- Update gameinfo/\*.json from assets [#106]

## 0.2.20 - 2023-05-21

### Added

- add xray to lambda.py

### Changed

- enable xray tracing in prod
- enable xray in serverless->lambda (all envs)

## 0.2.19 - 2023-05-19

### Added

- add script.post_to_discord()

### Changed

- refactor 'make script-name' behaviour

### Fixed

- fix: f"{self.title}.pdf" -> pdf_filename

## 0.2.18 - 2023-05-19

### Fixed

- fix "author presents" and "script name" layout

## 0.2.17 - 2023-05-18

### Fixed

- fix header position when no author information

## 0.2.16 - 2023-05-18

### Changed

- replace srggrs/assign-one-project-github-action@1.3.1 with actions/add-to-project@v0.5.0

## 0.2.15 - 2023-05-17

### Added

- style "1 Townsfolk is evil"
- if \_meta exists and has an author, show in the PDF

### Changed

- don't create simple-night centred div unnecessarily

## 0.2.14 - 2023-05-17

### Added

- add "make test-busy-nights"

### Changed

- restyle "night extras" for full-fat ST sheets

## 0.2.13 - 2023-05-17

### Added

- use browser localStorage to preserve form selections

### Changed

- use personal GH token in assign-project

## 0.2.12 - 2023-05-17

## 0.2.11 - 2023-05-16

### Added

- add "make many" to generate PDF variations more easily
- allow testing of lambda.py with copy of real event

### Changed

- ensure we set (default) values for all options in lambda.py
- set lambda function timeout to 60s
- change serverless options
- extract ensure_logger() into utils
- minor refinements to the filename_slog based on options
- make the character ability font a bit heavier
- use twosheet instead of doublesided for night info option
- Use "Regular" format by default in upload form
- tell pylint not to stress about 'duplicate-code' in main.py

### Fixed

- deactivate option selections in web page when they aren't sensible to pick
- fix inconsistencies in multiple player reference sheets
- fixup accidentally broken "easy print" template

## 0.2.10 - 2023-05-15

### Fixed

- enable 'SLS Deploy (by env)' on tag event

## 0.2.9 - 2023-05-15

## 0.2.8 - 2023-05-15

### Added

- reafactor and extend script options
- add jinx information to simple night info page
- add "all the options" to web page (no server support yet)
- use a slug summary of options in the generated PDF filename

### Changed

- run: poetry update
- increase sls timeout (15->30)
- tweak the @timeit function output

## 0.2.7 - 2023-05-14

### Fixed

- change tf workflow to (also) apply on tag events

## 0.2.6 - 2023-05-14

### Added

- update Script to allow paper_size override option [#74]
- add botcpdf/multipart.py + tests [#74]
- if non-aws env, create symlink to generated pdf

### Changed

- add a4/letter to generated PDF file name [#74]

## 0.2.5 - 2023-05-13

### Added

- put tag value in PR title for image generation

## 0.2.4 - 2023-05-13

### Changed

- increase left & right pdf margins [#64]
- specify 'portrait' in @page for pdf css

## 0.2.3 - 2023-05-13

### Fixed

- fix apigw->lambda invoke permission for 'prod' [#63]

## 0.2.2 - 2023-05-13

### Changed

- run: pre-commit autoupdate
- run: poetry update
- rename: botc-json2pdf -> render-pdf

## 0.2.1 - 2023-05-13

### Fixed

- add 'tag event' to the serverless deploy env logic

## 0.2.0 - 2023-05-13

### Added

- add workspace enabled s3 web support

### Changed

- only 'deploy serverless' on PR and tags
- only run terraform workflow on PRs and tags
- increase terraform version to 1.4.\*
- split some of s3-web into \_vars, acm and r53

### Removed

- remove debug workflow

### Fixed

- fix bucket for aws_s3_bucket.root_bucket

## 0.1.4 - 2023-05-02

### Security

- update python deps

## 0.1.3 - 2023-05-02

### Fixed

- show fabled in pdf; restyle for better general fit

## 0.1.2 - 2023-05-02

### Fixed

- post htmltidy uploader fix - oops

## 0.1.1 - 2023-05-02

### Changed

- give the www page some more exciting styling
- modify the page footer

## 0.1.0 - 2023-05-01

### Added

- very early draft of Uploader page
- first draft of workflow to 'deploy serverless'
- print the PDF path we generated
- add terraform for user, group, role + assumests
- add util.upload_to_aws()
- add terraform for pdf s3 bucket

### Changed

- ignore pyproject.toml in create release workflow
- debug event info to job step summary
- set python requirement to 3.10 (lambda compatibility)
- rewrite Dockerfile to function in a lamdba world with recent pango
- docker-test: make the curl post silent
- add environment, timeout, logRetentionInDays to serverless.yml

### Fixed

- Remove style options that raise warnings and are ignore

## 0.0.25 - 2023-04-22

### Added

- add code support for individual characters in game_info/characters
- character addition: vizier

### Changed

- Update gameinfo/\*.json from assets

## 0.0.24 - 2023-04-18

### Added

- add .github/workflows/\_debug-events.yaml
- add debug-event to create-release

### Changed

- rename: build -> create-release

## 0.0.23 - 2023-04-18

### Changed

- add ignore-tags to the Create Release workflow

## 0.0.22 - 2023-04-18

### Added

- add Dockerfile; maybe for AWS Lambda later

### Changed

- Change name of pre-commit workflow
- update astroid (2.15.2 -> 2.15.3)

## 0.0.21 - 2023-04-18

### Fixed

- add exclusions to workflow triggers

## 0.0.20 - 2023-04-18

## 0.0.19 - 2023-04-18

### Changed

- use secrets.CHISEL_GITHUB_TOKEN with actions/checkout

## 0.0.18 - 2023-04-17

### Added

- The one exception to no local scripts
- add script source links to README

### Fixed

- add timeout to requests.get()
- exit(…) -> sys.exit(…)

## 0.0.17 - 2023-04-17

### Fixed

- try using CHISEL_GITHUB_TOKEN for the git work

## 0.0.16 - 2023-04-17

### Added

- check files generated in 'generate pdfs' workflow

### Changed

- manually regenerate sample PNGs
- don't trigger workflows because of generated/ files

### Fixed

- open the jink player sheet preview in the readme by default

## 0.0.15 - 2023-04-17

## 0.0.14 - 2023-04-17

### Added

- showcase full-on jinx rendering

## 0.0.13 - 2023-04-17

## 0.0.12 - 2023-04-17

### Added

- Create dependabot.yml
- add config for yamllint (comment min spaces behaviour)

## 0.0.11 - 2023-04-16

### Added

- render jinx reminders on night order pages

### Changed

- update generated images of scripts

### Fixed

- update jinx reason (night) to wrap, but not too soon [#17]

## 0.0.10 - 2023-04-15

### Added

- Add a crazy jinx script to the grabber
- process jinxes into script character information [#3]
- add '@timeit' decorator
- add @timeit to script class methods

### Changed

- stylize some extra ability text
- update 'generated/Reptiles!'
- increase visibility of reminder text on night order pages

## 0.0.9 - 2023-04-15

### Added

- add pdf2images functionality
- load jinxes, offer some basic code features [nothing visual] [#3]
- add 'make grab-some-scripts' action
- showcase some of the generated output

### Changed

- tidy-up section side-headers on first page

### Removed

- remove all previously comitted scripts/

## 0.0.8 - 2023-04-14

### Added

- add workflow action to auto-assign PR owner
- fetch Fabled json information from bra1n
- add support for (loading) fabled character roles

### Changed

- update role.add_meta_roles() to use json file data
- refactor some role init into add_character_roles()
- Update gameinfo/\*.json from assets
- update icons (from /github.com/bra1n/townsquare)

## 0.0.7 - 2023-04-14

### Added

- add workflow to run pre-commit checks
- add 'create release' workflow

### Fixed

- update pre-commit to also exclude .changes/ and scripts/

## 0.0.6 - 2023-04-14

### Added

- fix placement of footer info on first page

### Changed

- add more json assets to 'make refresh-json' [#2]
- Update gameinfo/\*.json from assets
- pre-commit autoupdate, and format change for 'exclude'
- ignore .changes/unreleased/ files with yamllint

### Fixed

- [pre-commit] ignore anything in gameinfo and fonts as we don't author these ourself
- add make dep of 'install-dev' for 'process'

## 0.0.5 - 2023-04-14

### Added

- add .gitattributes file to preserve our sanity with external json files

### Changed

- rework first/other night order behaviour [#2]
- pre-commit autoupdate, and format change for 'exclude'
- remove roles.json; use new gameinfo/roles-bra1n.json
- update \*.json from upstream sources
- extend 'make refresh-json'

## 0.0.4 - 2023-04-13

### Added

- add generated-by to first page footer, with version
- fail with error when trying to add a role where we don't recognise the id slug [#5]
- handle \_meta data found in script data json [#1]

### Changed

- extract Role and RoleData to role.py
- refine the 'id slug not known' error output

### Fixed

- fix git commit in 'make changelog' action

## 0.0.3 - 2023-04-13

### Added

- makefile rules for release prep

## 0.0.2 - 2023-04-13

### Added

- use changie

## 0.0.1 - 2023-04-13

### Added

- Initial Release
